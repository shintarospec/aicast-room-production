# 🚀 AIcast Room - 最新機能一覧

**更新日:** 2025年10月5日  
**アプリバージョン:** 6,377行（完全版復旧済み）  
**ステータス:** 全機能正常稼働中

---

## 📋 メインメニュー構成

AIcast Roomは以下の10個のメイン機能で構成されています：

### 1. 📊 ダッシュボード
**概要:** システム全体の統計・分析・監視機能
- **投稿統計表示** - キャスト別投稿数・成功率
- **送信履歴分析** - Google Sheets・X API送信状況
- **システム健康度** - リアルタイム監視
- **パフォーマンス指標** - AI生成効率・応答時間
- **アクティビティタイムライン** - 最新の活動状況

### 2. 📝 投稿管理
**概要:** 投稿ライフサイクル全体の管理機能

#### サブ機能（6つのタブ）
- **📄 投稿案 (Drafts)** - AI生成された投稿の下書き管理
- **✅ 承認済み (Approved)** - 承認され送信可能な投稿
- **📤 送信済み (Sent)** - 外部プラットフォームに送信完了
- **❌ 却下済み (Rejected)** - 品質基準に満たない投稿
- **📅 スケジュール投稿** - 時間指定自動投稿機能
- **🔄 リツイート予約** - 指定ツイートの自動リツイート/引用ツイート

#### 送信先プラットフォーム
- **Google Sheets** - スプレッドシート連携
- **X (Twitter) API** - ダイレクト投稿機能

### 3. 📢 一斉指示
**概要:** 複数キャストへの統一指示・設定変更
- **全キャスト一括設定** - 共通パラメータの一括変更
- **グローバル指示** - プロジェクト全体への指針
- **緊急時対応** - 一斉停止・調整機能

### 4. 👤 キャスト管理
**概要:** AIキャラクター（キャスト）の詳細管理

#### サブ機能（4つのタブ）
- **👤 個別管理** - 新規作成・編集・削除
- **📊 CSV管理** - バルクインポート・エクスポート
- **⚙️ フィールド管理** - カスタムフィールド設定
- **🤖 AI自動生成** - プロフィール自動作成

#### キャスト設定項目
- **基本情報** - 名前・ニックネーム・プロフィール
- **X API認証情報** - Consumer Key/Secret, Access Token/Secret, Bearer Token
- **性格・トーン設定** - AI生成のパーソナリティ制御
- **投稿傾向** - コンテンツの方向性・頻度
- **制約・フィルター** - 禁止ワード・内容制限

### 5. 🎬 シチュエーション管理
**概要:** 投稿コンテキスト・場面設定の管理
- **シチュエーション定義** - 具体的な場面・状況設定
- **コンテキスト管理** - 時間・場所・イベント情報
- **季節・イベント対応** - 期間限定シチュエーション

### 6. 🏷️ カテゴリ管理
**概要:** 投稿内容の分類・タグ管理
- **カテゴリ定義** - 投稿ジャンルの階層管理
- **タグシステム** - 柔軟な分類機能
- **検索・フィルタ** - カテゴリ別コンテンツ抽出

### 7. 👥 グループ管理
**概要:** キャスト・コンテンツのグループ化
- **キャストグループ** - 関連キャラクターのセット管理
- **プロジェクトグループ** - 企画別管理
- **権限グループ** - アクセス制御

### 8. 💡 アドバイス管理
**概要:** AI生成の品質向上・指針管理
- **生成ガイドライン** - AI出力品質の制御
- **改善提案** - コンテンツ向上のアドバイス
- **品質基準** - 承認・却下基準の設定

### 9. 🎯 指針アドバイス
**概要:** プロジェクト戦略・方向性の管理
- **戦略指針** - 長期的な方向性設定
- **目標管理** - KPI・達成指標
- **改善指導** - 運用最適化提案

### 10. ⚙️ システム設定
**概要:** アプリケーション全体の設定・管理

#### サブ機能（3つのタブ）
- **🔐 Google Cloud認証** - Vertex AI・ADC設定
- **🗃️ Google Sheets連携** - スプレッドシート設定
- **🔧 アプリ設定** - 全般的なシステム設定

---

## 🤖 AI機能

### Vertex AI Gemini統合
- **モデル:** Gemini-1.5-pro
- **機能:** 自然言語生成・キャラクター性反映
- **場所:** Asia-Northeast1
- **認証:** Google Cloud ADC

### AI生成機能
- **投稿コンテンツ生成** - キャラクター別パーソナライズ
- **プロフィール自動作成** - キャスト設定支援
- **コンテンツ改善提案** - 品質向上アドバイス
- **シチュエーション対応** - 文脈に応じた内容調整

---

## 🔄 自動化機能

### スケジュール投稿システム
- **実行間隔:** 1分間隔チェック
- **実行方式:** cronジョブ（local_schedule_checker.py）
- **対応プラットフォーム:** X API・Google Sheets
- **タイムゾーン:** JST対応
- **認証方式:** データベース直接取得（Secret Manager無効化済み）

### リツイート予約システム
- **実行間隔:** 5分間隔チェック
- **実行方式:** cronジョブ（local_retweet_scheduler.py）
- **機能:** 通常リツイート・引用ツイート
- **スケジューリング:** 時間指定予約

---

## 💾 データベース構造

### 主要テーブル
- **casts** - キャスト基本情報
- **cast_x_credentials** - X API認証情報
- **posts** - 投稿データ（Draft→Approved→Sent）
- **retweet_schedules** - リツイート予約
- **send_history** - 送信履歴
- **situations** - シチュエーション定義
- **groups** - グループ管理
- **advice_master** - アドバイス管理

### データ形式
- **データベース:** SQLite
- **ファイル:** casting_office.db
- **エンコーディング:** UTF-8
- **バックアップ:** Git履歴管理

---

## 🔐 セキュリティ・認証

### Google Cloud認証
- **方式:** Application Default Credentials (ADC)
- **スコープ:** Vertex AI・Secret Manager
- **プロジェクト:** aicast-472807

### X API認証
- **方式:** OAuth 1.0a + Bearer Token
- **保存:** データベース（cast_x_credentials）
- **アカウント分離:** キャスト別専用認証

### Secret Manager
- **状態:** 無効化（USE_SECRET_MANAGER = False）
- **理由:** 開発環境での利便性向上
- **将来:** 本番環境で有効化予定

---

## 🌐 外部連携

### Google Services
- **Vertex AI:** AI生成エンジン
- **Google Sheets API:** スプレッドシート連携
- **Secret Manager:** 認証情報管理（無効化中）

### X (Twitter) Platform
- **X API v2:** 投稿・リツイート機能
- **Cloud Functions:** asia-northeast1-aicast-472807.cloudfunctions.net/x-poster
- **機能:** 投稿・リツイート・引用ツイート

---

## 🎮 ユーザーインターフェース

### フロントエンド
- **フレームワーク:** Streamlit
- **ポート:** 8502
- **デザイン:** カスタムCSS（style.css）
- **レスポンシブ:** デスクトップ・タブレット対応

### ナビゲーション
- **サイドバーメニュー:** 10個のメイン機能
- **タブシステム:** 機能内の詳細分類
- **リダイレクト機能:** 機能間の連携

---

## 📊 運用・監視

### ログ管理
- **スケジュール投稿:** schedule.log
- **リツイート処理:** retweet.log
- **アプリケーション:** app.log
- **ローテーション:** 日別管理

### 健全性チェック
- **cronサービス:** 自動監視
- **データベース:** 整合性チェック
- **外部API:** 接続状況確認
- **認証状態:** 有効性検証

---

## 🚀 デプロイ・環境

### 開発環境
- **プラットフォーム:** VS Code Codespace
- **Python:** 3.12
- **起動方法:** `python3 run.py`
- **URL:** http://0.0.0.0:8502

### 本番環境オプション
- **Streamlit Cloud:** 対応済み
- **Sakura VPS:** 運用ガイドあり
- **Google Cloud Run:** 対応可能

---

## 📝 開発・保守

### コード構成
- **メインファイル:** app.py（6,377行）
- **設定管理:** config.py
- **スケジューラー:** local_schedule_checker.py, local_retweet_scheduler.py
- **テスト:** test_existing_functions.py

### 開発ルール
- **テスト方針:** Streamlit GUI中心
- **ドキュメント:** docs/フォルダに統一
- **バージョン管理:** Git（25個のMDファイル保護）

---

*この機能一覧は定期的に更新されます。最新情報は `docs/` フォルダの各ドキュメントをご確認ください。*